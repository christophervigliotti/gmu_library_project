<%= form_for(@book) do |f| %>
  <%= render 'shared/validation_errors', object: @book %>
  <%= f.label :title %> <%= f.text_field :title, autofocus: true %><br />

  <%= f.label :author %>
  <%
   #hacky fix for null f.object.author.id when form is in create mode (obviously not the right way to do this)
  @selected_thing = nil
  if f.object.author.presence
    @selected_thing = f.object.author.id
   end
  %>
  <%= f.select(
          :author,
          options_for_select(
              @authors.all.collect {|w| [ w.name, w.id ] },
              @selected_thing,
          )
      ) %><br />

  <%= f.label :abstract %> <%= f.text_area :abstract %><br />
  <%= f.label :pages %> <%= f.text_field :pages %><br />
  <%= f.label :price %> <%= f.text_field :price %><br />
  <%= f.label :isbn %> <%= f.text_field :isbn %><br />
  <%= f.label :genre %> <%= f.text_field :genre %><br />
  <%= f.label :image_cover_url %> <%= f.text_field :image_cover_url %><br />
  <%= f.label :published_on %> <%= f.date_select(:published_on)  %><br />
  <%= f.label :total_in_library %> <%= f.text_field :total_in_library %><br />

  <p>
    <%= f.submit %>
    <%= link_to 'Cancel', books_path %>
  </p>

<% end %>